/*
 	Like mod
	JS part
    Copyright (C) 2012 soyuka
*/
(function(a){a.fn.wsLiker=function(b,c,d,e,f){a(this).live("click",function(g){g.preventDefault();var h=a(this).attr("href");a.get(h,function(a){console.log(a)});var i=a(this).text();var j=0;if(i==d){a(this).text(e);a(this).attr("href",h+"&unlike=1");j=0}else{a(this).text(d);a(this).attr("href",h.slice(0,-9));j=1}var k='<span title="'+c+'">, <a href="profile.php?id='+b+'">'+c+"</a></span>";if(j==0){var l=a(this).parents(".blockpost").next();if(l.hasClass("liker")){var m=l.find(".postmsg p");tpl=a(k).clone();tpl.hide();tpl.appendTo(m).fadeIn().css("display","inline")}else{var n='<div class="blockpost  rowodd liker">'+'<div class="box">'+'<div class="inbox">'+'<div class="postbody">'+'<div class="postleft">'+"<dl>"+'<dd class="usertitle"><strong>'+f+"</strong></dd>"+"</dl>"+"</div>"+'<div class="postright">'+'<div class="postmsg">'+'<p><span title="'+c+'"><a href="profile.php?id='+b+'">'+c+"</a></span></p>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>";var m=a(this).parents(".blockpost");tpl=a(n).clone();tpl.hide();tpl.insertAfter(m).delay(100).fadeIn()}}else{var l=a(this).parents(".blockpost").next(".liker");var o=a("span[title="+c+"]");l.find(o).fadeOut("fast",function(){a(this).remove()});var p=l.find("a").length;if(p==0||p==1)l.fadeOut("fast").fadeOut("fast",function(){a(this).empty().remove()})}})}})(jQuery)